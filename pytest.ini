[pytest]
# Pytest configuration for enhanced testing architecture

# Test discovery
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Markers for test categorization
markers =
    unit: Unit tests (fast, isolated, mocked dependencies)
    integration: Integration tests (multiple components, no external calls)
    e2e: End-to-end tests (complete workflows, may include external calls)
    performance: Performance and load tests
    slow: Slow running tests (may take >30 seconds, high resource usage)
    network: Tests requiring network connectivity
    credentials: Tests requiring valid credentials
    docker: Tests requiring Docker environment
    contract: Contract tests for API compatibility

# Output and reporting  
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --durations=10
    --cov=src/vortex
    --cov-report=term-missing
    --cov-report=html:coverage_html
    --cov-report=xml:coverage.xml
    --cov-branch
    --cov-fail-under=80
    
# Warning filtering
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning  
    ignore::UserWarning:urllib3.*
    error::RuntimeWarning

# Note: Click library generates a collection warning during pytest introspection.
# This cannot be suppressed due to pytest's collection timing and is harmless.

# Parallel execution
# Uncomment when pytest-xdist is available
# addopts = -n auto

# Test timeouts (requires pytest-timeout)
# timeout = 300
# timeout_method = thread

# Minimum Python version
minversion = 6.0

# Test collection patterns
norecursedirs = 
    .git
    .tox
    dist
    build
    *.egg
    .venv
    venv
    __pycache__
    .pytest_cache
    node_modules